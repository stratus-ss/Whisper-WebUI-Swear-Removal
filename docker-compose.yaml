services:
  whisper-webui:
    container_name: whisper-webui
    image: quay.io/sovens/transcription/whisper-webui:swear0.2

    volumes:
      # Mount container's volume paths to local machine directories
      # Models will be stored in the './models' directory
      # Output files will be stored in the './outputs' directory
      # Configuration files in './configs' directory
      - ./models:/Whisper-WebUI/models
      - ./outputs:/Whisper-WebUI/outputs
      - ./configs:/Whisper-WebUI/configs

    ports:
      - "7860:7860"

    stdin_open: true
    tty: true

    entrypoint: ["python", "app.py", "--server_port", "7860", "--server_name", "0.0.0.0"]

    # GPU support using NVIDIA Container Runtime
    runtime: nvidia

    environment:
      - NVIDIA_VISIBLE_DEVICES=all
      - NVIDIA_DRIVER_CAPABILITIES=compute
